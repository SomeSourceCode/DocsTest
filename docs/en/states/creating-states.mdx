---
title: Creating Your Own States
shortTitle: Creating States
description: Learn how to create and use your own states in SomeGuiApi.
---

<Note>
	If you don't plan on using your own states and only want to learn how to work the the provided ones, you can skip this page.
</Note>

## Creating States

Each type of state provides a simple implementation, following the `SimpleXState` pattern. To create a state of type `boolean`, for instance,
you can use the `SimpleBooleanState` class:

```java
BooleanState booleanState = new SimpleBooleanState();
```

You can also provide an initial value:

```java
IntegerState integerState = new SimpleIntegerState(42);
```

## Read-Only States

If you want to provide a read-only view of your state - for example when you're creating your own pane - you can use a `ReadOnlyStateWrapper`.\
\ Write an example (note for writers): Use an example that makes sense, not just "booleanState" or something like that but a "real" value:
Let's say you want to create a read-only `gamePhase`, you could implement it as follows:

```java title="Game.java"
public class Game {

	// ...

	private ReadOnlyObjectWrapper<GamePhase> gamePhaseWrapper;

	private ReadOnlyObjectWrapper<GamePhase> gamePhaseStateWrapper() {
		if (gamePhaseWrapper == null) {
			gamePhaseWrapper = new ReadOnlyObjectWrapper<>(GamePhase.INITIAL);
		}
		return gamePhaseWrapper;
	}

	public ReadOnlyState<GamePhase> gamePhaseState() {
		return gamePhaseStateWrapper().readOnly();
	}

	public GamePhase getGamePhase() {
		return gamePhaseStateWrapper == null ? GamePhase.INITIAL : gamePhaseStateWrapper().get();
	}

	private void setGamePhase(GamePhase gamePhase) {
		gamePhaseStateWrapper().set(gamePhase);
	}

	// ...

}
```

Note how the wrapper behaves just like a normal state, but it provides an additional `readOnly()` method that returns a read-only view of the state.
That means, that inside the `Game` instance, you can get and set the `gamePhase` state using the `set` and `get` methods.\
\
For an outside user, however, the `gamePhaseState()` method returns a read-only state, which means they can only observe changes but not modify the state.

<Info>
	There's a read-only wrapper for [each type of state](/states#types-of-states), such as `ReadOnlyBooleanWrapper`, `ReadOnlyIntegerWrapper`, etc.
</Info>

## Sanitizing

There is currently one problem still in the above example: The `GamePhase` can be set to `null`, which is not a valid value, which in this case
should not be allowed. To prevent this, all state implementations can override the `sanitize` method, which is called _before_ the value is set
and determines what the new value should be. By default, it does not alter that value, but you can override it to implement your own logic.\
\
To fix the above example, let's override the `sanitize` method in the `gamePhaseWrapper` state:

```java title="Game.java"
// ...

private ReadOnlyObjectWrapper<GamePhase> gamePhaseStateWrapper() {
	if (gamePhaseWrapper == null) {
		gamePhaseWrapper = new ReadOnlyObjectWrapper<>(GamePhase.INITIAL) {
			// highlight-start
			@Override
			public GamePhase sanitize(GamePhase oldPhase, GamePhase newPhase) {
				if (newPhase == null) {
					return oldPhase;
				}
				return newPhase;
			}
			// highlight-end
		};
	}
	return gamePhaseWrapper;
}

// ...
```

Another example of what you could do is to constrain the range of the value, such as only allowing values between 0 and 100 for an `IntegerState`:

```java
IntegerState integerState = new SimpleIntegerState() {
	@Override
	public Integer sanitize(Integer oldValue, Integer newValue) {
		return Math.clamp(newValue, 0, 100);
	}
};
```
